webpackJsonp([1],{TbJR:function(t,s){},gi9h:function(t,s){},"r6t+":function(t,s,i){"use strict";var o=i("fpap"),e=i("mw3O"),a=i.n(e),n={data:function(){return{page:{pageNo:1,type:1,isLoading:!1,isLoadEnd:!1},publishList:[]}},mounted:function(){this.getList()},props:["type","keywords","fromPage"],mixins:[o.a],filters:{getImgClass:function(t){return t.img?t.img.length>2&&4!=t.img.length?"three":t.img.length>1?"two":"one":""}},methods:{getList:function(){var t=this;if(!this.$store.state.isLoading&&!this.page.isLoadEnd){this.$store.commit("setIsLoading",!0);var s="1"==this.fromPage?"/sns_wx/getTopicPostList":"/sns_wx/snsIndex",i={type:this.type,next:this.page.pageNo,keywords:this.keywords},o={topic_id:this.$route.query.id,next:this.page.pageNo},e="1"==this.fromPage?o:i;$axios.post(s,a.a.stringify(e)).then(function(s){var i=s.data;if(t.$store.commit("setIsLoading",!1),"success"==i.msg){if(t.page.pageNo>=i.result.all_page&&(t.page.isLoadEnd=!0),t.page.pageNo++,!i.result)return;t.publishList=t.publishList.concat(i.result.list)}else t.$store.commit("showAlertTip",i.msg)}).catch(function(){t.$store.commit("setIsLoading",!1),t.$store.commit("showAlertTip","服务繁忙")})}},replaceHttps:function(t){return t.filter(function(t){return t?t.replace("https","http"):""})},previewImg:function(t,s){var i=s?s.replace("https","http"):"";t=this.replaceHttps(t),wx.previewImage({current:i,urls:t})}}},c={render:function(){var t=this,s=t.$createElement,i=t._self._c||s;return i("section",{directives:[{name:"load-more",rawName:"v-load-more",value:t.getList,expression:"getList"}]},[i("div",{staticClass:"newTopicCont"},t._l(t.publishList,function(s){return i("div",{key:s.id,staticClass:"bgWhite topicList"},[i("div",{staticClass:"authorRow clearfix"},[i("div",{staticClass:"headImg fl"},[i("img",{attrs:{src:s.avatar}})]),t._v(" "),i("div",{staticClass:"authorInfo"},[i("div",{staticClass:"author"},[t._v(t._s(s.nick?s.nick:"匿名用户")),i("span",{staticClass:"level"},[t._v(t._s(s.level?"Lv."+s.level.substring(2):""))])]),t._v(" "),i("div",{staticClass:"publishTime f10 color_9b"},[t._v(t._s(s.created_at))])])]),t._v(" "),i("router-link",{attrs:{to:{path:"detail",query:{id:s.id}}}},[i("div",{staticClass:"toppicCont"},[s.topic_name?i("span",{staticClass:"classify mainColor",attrs:{"topic-id":"'+item.topic_id+'"}},[t._v("#"+t._s(s.topic_name)+"# ")]):t._e(),t._v(t._s(s.content)+"\n                ")])]),t._v(" "),i("div",{staticClass:"toppicPic flex"},t._l(s.thumb,function(o,e){return i("div",{key:e,staticClass:"inline imgList",class:t._f("getImgClass")(s),on:{click:function(i){t.previewImg(s.img,s.img[e])}}},[i("img",{attrs:{src:o}})])})),t._v(" "),t._m(0,!0)],1)}))])},staticRenderFns:[function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"corp_row flex"},[s("div",{staticClass:"btn commitBtn"},[s("span",{staticClass:"icon icon_commit"}),this._v(" "),s("span",{staticClass:"num inline"},[this._v("评论")])]),this._v(" "),s("div",{staticClass:"btn supportBtn"},[s("span",{staticClass:"icon icon_support"}),this._v(" "),s("span",{staticClass:"num inline"},[this._v("10")])])])}]};var r=i("VU/8")(n,c,!1,function(t){i("gi9h")},null,null);s.a=r.exports},slUG:function(t,s,i){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var o={data:function(){return{fromapp:!1,fromWx:!1,fromPage:1,topicInfo:{id:"46",editor_id:"123",topic_top_pic:"https://osstest.flowerplus.cn/sns_image/20171129/15119347058040.jpg",topic_content:"sssss",count:"23",focus:"12",is_focus:!0}}},components:{PushList:i("r6t+").a},methods:{addFocus:function(){var t=this;this.$store.state.isLoading||(this.$store.commit("setIsLoading",!0),$axios.post("https://t.flowerplus.cn/sns_wx/addFocus",{topic_id:this.topicInfo.id,f_cid:this.topicInfo.editor_id}).then(function(s){t.topicInfo.is_focus?t.topicInfo.focus--:t.topicInfo.focus++,t.topicInfo.is_focus=!t.topicInfo.is_focus,t.$store.commit("setIsLoading",!1)}).catch(function(){t.$store.commit("setIsLoading",!1),t.$store.commit("showAlertTip","操作失败！")}))}}},e={render:function(){var t=this,s=t.$createElement,i=t._self._c||s;return i("div",{staticClass:"pageTopicDetail"},[t.fromapp?i("a",{staticClass:"mainButton tc",staticStyle:{position:"fixed",top:"0","z-index":"120",width:"100%"},attrs:{href:"https://a.app.qq.com/o/simple.jsp?pkgname=com.flowerplus.store"}},[t._v("打开FlowerPlus花加app，加入花友社区")]):t._e(),t._v(" "),t.fromWx?i("a",{staticClass:"mainButton tc",staticStyle:{position:"fixed",top:"0","z-index":"120",width:"100%"},attrs:{href:"/sns_wx/index"}},[t._v("点此查看更多精华帖子")]):t._e(),t._v(" "),i("div",{staticClass:"topPanel bgWhite",class:{marTop:t.fromWx}},[i("div",{staticClass:"banner"},[i("img",{attrs:{src:t.topicInfo.topic_top_pic}})]),t._v(" "),i("div",{staticClass:"pad16 descrip"},[i("div",{staticClass:"title f16 borderBottom"},[t._v(t._s(t.topicInfo.topic_content))]),t._v(" "),i("div",{staticClass:"attention flex mainColor2"},[i("div",{},[i("span",{attrs:{id:"totalPost"}},[t._v(t._s(t.topicInfo.count))]),t._v("个帖子，已有"),i("span",{attrs:{id:"totalFocus"}},[t._v(t._s(t.topicInfo.focus))]),t._v("人关注\n                  ")]),t._v(" "),i("div",{staticClass:"tc f12 rlt",class:{checked:t.topicInfo.is_focus},attrs:{id:"attentionBtn"},on:{click:t.addFocus}},[i("span",{staticClass:"addIcon inline",class:{hide:t.topicInfo.is_focus}}),i("span",{staticClass:"txt"},[t._v(t._s(t.topicInfo.is_focus?"已":"")+"关注")])])])])]),t._v(" "),i("div",{staticClass:"pad16 f16 newTitle"},[t._v("最新")]),t._v(" "),i("div",{staticClass:"newTopicCont"},[i("PushList",{attrs:{fromPage:t.fromPage}})],1),t._v(" "),i("router-link",{attrs:{to:{path:"posting",query:{id:t.topicInfo.id}}}},[i("div",{staticClass:"postingIconC"})])],1)},staticRenderFns:[]};var a=i("VU/8")(o,e,!1,function(t){i("TbJR")},null,null);s.default=a.exports}});
//# sourceMappingURL=1.e5a16f13327442b22b5e.js.map